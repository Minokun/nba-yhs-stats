# 🚀 NBA开拓者队数据分析系统 - 快速开始指南

> 5分钟快速上手，开始追踪杨瀚森的NBA之旅！

---

## 📋 准备工作

### 1. 环境检查

**必需环境：**
- ✅ Python 3.12 或更高版本
- ✅ 稳定的网络连接（访问NBA API）

**检查Python版本：**
```bash
python --version
# 应该显示 Python 3.12.x 或更高
```

### 2. 获取Kimi API密钥

**免费注册步骤：**

1. 访问 Kimi开放平台：https://platform.moonshot.cn/
2. 注册/登录账号
3. 进入"API密钥"页面
4. 点击"创建新密钥"
5. 复制生成的密钥（sk-xxx...）

💡 **提示：** Kimi提供免费额度，足够日常使用！

---

## ⚡ 快速安装（3步搞定）

### 方式一：使用uv包管理器（推荐）

```bash
# 1. 克隆项目
git clone <项目地址>
cd lazzyAgentProject

# 2. 安装依赖（自动）
uv sync

# 3. 设置API密钥
export LAZYLLM_KIMI_API_KEY="你的Kimi密钥"

# 4. 启动服务
uv run python nba_app.py
```

### 方式二：使用pip

```bash
# 1. 克隆项目
git clone <项目地址>
cd lazzyAgentProject

# 2. 安装依赖
pip install lazyllm flask requests beautifulsoup4

# 3. 设置API密钥
export LAZYLLM_KIMI_API_KEY="你的Kimi密钥"

# 4. 启动服务
python nba_app.py
```

### 方式三：一键启动脚本

```bash
# 设置API密钥后直接运行
export LAZYLLM_KIMI_API_KEY="你的Kimi密钥"
bash run.sh
```

---

## 🎉 首次启动

### 启动成功标志

看到以下信息说明启动成功：

```
============================================================
🏀 NBA开拓者队数据分析系统
============================================================

正在启动Web服务器...

访问 http://localhost:23456 查看数据可视化

按 Ctrl+C 停止服务

============================================================
 * Serving Flask app 'nba_app'
 * Running on http://127.0.0.1:23456
```

### 访问系统

**在浏览器中打开：**
```
http://localhost:23456
```

**你会看到：**
- 🏀 左侧：完整的数据展示区
- 🤖 右侧：AI智能分析（自动生成）
- 👤 杨瀚森的NBA官方头像
- 📊 实时更新的比赛数据

---

## 📖 使用教程

### 查看球队数据

**战绩卡片**（左上角）
- 赛季战绩：5胜2负
- 胜率：71.4%（带进度条）
- 场均得分/失分

### 查看球员数据

**杨瀚森专区**（中间大卡片）
- NBA官方头像
- 基本信息：位置、背号、身高、体重
- 场均数据：得分、篮板、助攻、盖帽
- 投篮效率：命中率、罚球率（带进度条）

### 查看比赛记录

**比赛日程表**（下方）
- 日期、对手、主客场
- 比赛结果、比分
- 最近10场记录

**个人表现表**（底部）
- 每场比赛详细数据
- 时间、得分、篮板、助攻、盖帽
- 投篮命中率、三分球等

### 阅读AI分析

**右侧固定栏**
- 自动分析杨瀚森表现
- 优势和待提升领域
- 趋势和建议
- 可独立滚动浏览

---

## 🛠️ 常见操作

### 刷新数据

**方法1：刷新页面**
```
按 F5 或 Ctrl+R
```

**方法2：访问API**
```
http://localhost:23456/api/data
```
查看原始JSON数据

### 获取AI分析

**访问AI分析API：**
```
http://localhost:23456/api/analysis
```

**返回格式：**
```json
{
  "success": true,
  "analysis": "AI分析内容...",
  "timestamp": "2025-10-15 16:30:00"
}
```

### 停止服务

**在终端按：**
```
Ctrl + C
```

### 修改端口

**编辑 `nba_app.py`：**
```python
if __name__ == '__main__':
    app.run(host='0.0.0.0', port=23456)  # 改成其他端口
```

---

## 🔧 自定义配置

### 追踪其他球员

**修改 `nba_data_fetcher.py`：**

```python
class NBADataFetcher:
    def __init__(self):
        # 修改这里的球员ID
        self.yang_hansen_id = "1642905"  # 改成其他球员ID
```

**如何找到球员ID？**
1. 访问 NBA官网球员页面
2. URL中的数字就是球员ID
3. 例如：`/players/1642905` → ID是1642905

### 切换其他球队

**修改 `nba_data_fetcher.py`：**

```python
self.blazers_team_id = "1610612757"  # 开拓者
# 改成其他球队ID
```

**常见球队ID：**
- 勇士：1610612744
- 湖人：1610612747
- 火箭：1610612745
- 快船：1610612746

### 修改AI模型

**编辑 `nba_app.py`：**

```python
chat = lazyllm.OnlineChatModule(
    api_key=kimi_api_key,
    source='kimi',           # 可改为其他来源
    model='kimi-k2-0905-preview'  # 可改为其他模型
)
```

---

## ❗ 常见问题解决

### Q1: 启动报错 "Module not found"

**解决方法：**
```bash
# 重新安装依赖
pip install lazyllm flask requests beautifulsoup4 lxml

# 或使用uv
uv sync
```

### Q2: API密钥错误

**检查步骤：**
1. 确认密钥格式正确（sk-开头）
2. 检查环境变量是否设置
3. 重新设置密钥：

```bash
# Mac/Linux
export LAZYLLM_KIMI_API_KEY="你的密钥"

# Windows CMD
set LAZYLLM_KIMI_API_KEY=你的密钥

# Windows PowerShell
$env:LAZYLLM_KIMI_API_KEY="你的密钥"
```

### Q3: 页面无法访问

**检查清单：**
- [ ] 服务是否启动成功？
- [ ] 端口23456是否被占用？
- [ ] 防火墙是否拦截？

**更换端口：**
```python
# 修改 nba_app.py
app.run(host='0.0.0.0', port=8888)  # 改成8888
```

### Q4: 数据加载失败

**可能原因：**
1. 网络问题（无法访问NBA API）
2. API返回错误

**解决方法：**
```bash
# 测试网络连接
curl https://api.nba.cn/sib/v2/players/1642905/games

# 查看详细日志
python nba_app.py --debug
```

### Q5: AI分析显示"加载中"

**可能原因：**
1. Kimi API密钥无效
2. 网络连接问题
3. API配额用完

**解决方法：**
1. 检查API密钥
2. 查看控制台错误信息
3. 访问Kimi平台查看配额

---

## 📱 移动端访问

### 局域网访问

**1. 获取本机IP：**
```bash
# Mac/Linux
ifconfig | grep "inet "

# Windows
ipconfig
```

**2. 在手机浏览器输入：**
```
http://你的IP:23456
```

例如：`http://192.168.1.100:23456`

### 公网访问

**使用内网穿透工具：**

**选项1：Ngrok**
```bash
ngrok http 23456
```

**选项2：Cpolar**
```bash
cpolar http 23456
```

会生成一个公网URL，任何人都可以访问！

---

## 🎓 进阶使用

### 数据导出

**访问API获取JSON数据：**
```bash
curl http://localhost:23456/api/data > data.json
```

**Python脚本导出：**
```python
import requests
import json

# 获取数据
response = requests.get('http://localhost:23456/api/data')
data = response.json()

# 保存为JSON
with open('nba_data.json', 'w', encoding='utf-8') as f:
    json.dump(data, f, ensure_ascii=False, indent=2)

print("数据已导出到 nba_data.json")
```

### 定时任务

**使用cron定时获取数据：**

```bash
# 编辑crontab
crontab -e

# 添加定时任务（每天早上8点）
0 8 * * * curl http://localhost:23456/api/data > ~/nba_data_$(date +\%Y\%m\%d).json
```

### Docker部署

**Dockerfile示例：**
```dockerfile
FROM python:3.12-slim

WORKDIR /app
COPY . .

RUN pip install lazyllm flask requests beautifulsoup4

ENV LAZYLLM_KIMI_API_KEY=""

CMD ["python", "nba_app.py"]
```

**构建运行：**
```bash
docker build -t nba-analyzer .
docker run -p 23456:23456 -e LAZYLLM_KIMI_API_KEY="你的密钥" nba-analyzer
```

---

## 📊 性能优化

### 数据缓存

**添加缓存机制（避免频繁请求）：**

```python
from functools import lru_cache
from datetime import datetime, timedelta

@lru_cache(maxsize=1)
def get_cached_data():
    """缓存5分钟"""
    return fetch_nba_data()
```

### 异步加载

**前端优化：**
```javascript
// 先显示页面，再异步加载AI分析
async function loadAnalysis() {
    const response = await fetch('/api/analysis');
    // 更新页面...
}
```

---

## 🎯 使用技巧

### 技巧1：快捷键

- `F5` - 刷新数据
- `Ctrl + F` - 搜索数据
- `Ctrl + +/-` - 缩放页面

### 技巧2：书签保存

**添加到浏览器书签：**
- 名称：NBA开拓者数据
- URL：http://localhost:23456

### 技巧3：多窗口对比

- 左边窗口：当前赛季数据
- 右边窗口：API原始数据
- 对比分析更方便！

### 技巧4：分享链接

**使用内网穿透后：**
```
分享给朋友：https://xxx.ngrok.io
让他们也能看到数据！
```

---

## 💡 最佳实践

### 开发环境

```bash
# 使用虚拟环境
python -m venv venv
source venv/bin/activate  # Mac/Linux
venv\Scripts\activate     # Windows

# 安装依赖
pip install -r requirements.txt
```

### 生产环境

```bash
# 使用Gunicorn（Linux/Mac）
pip install gunicorn
gunicorn -w 4 -b 0.0.0.0:23456 nba_app:app

# 或使用Waitress（Windows）
pip install waitress
waitress-serve --host=0.0.0.0 --port=23456 nba_app:app
```

### 日志记录

**添加日志：**
```python
import logging

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(levelname)s - %(message)s',
    filename='nba_app.log'
)
```

---

## 🆘 获取帮助

### 文档资源

- 📖 **LazyLLM文档**: https://github.com/LazyAGI/LazyLLM
- 🤖 **Kimi API文档**: https://platform.moonshot.cn/docs
- 🏀 **NBA API参考**: NBA官方文档

### 社区支持

- 💬 **微信群**: [二维码]
- 📧 **邮件**: your-email@example.com
- 🐛 **Bug报告**: GitHub Issues

### 视频教程

- 🎥 **B站**: [待上传]
- 📹 **YouTube**: [待上传]

---

## ✅ 检查清单

在开始使用前，确保完成：

- [ ] Python 3.12+ 已安装
- [ ] Kimi API密钥已获取
- [ ] 项目代码已下载
- [ ] 依赖包已安装
- [ ] 环境变量已设置
- [ ] 服务成功启动
- [ ] 浏览器能访问页面
- [ ] 数据正常显示
- [ ] AI分析正常工作

---

<div align="center">

## 🎉 准备就绪！

**现在打开浏览器，开始追踪杨瀚森的NBA之旅吧！**

*有问题随时查阅本指南或联系我们*

</div>

---

**最后更新：2025年10月15日**
